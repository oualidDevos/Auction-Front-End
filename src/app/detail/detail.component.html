<ng-template [ngIf]="ProductDetailsViewModel">
  <div class="container">
    <div class="header">
      <div class="row">
        <div class="col mb-3">
          <div class="card">
            <div class="card-body d-flex">
              <h3
                style="
                  padding-left: 13px;
                  align-self: center;
                  margin: 0px;
                  border-left: 1px solid rgb(161, 160, 160);
                "
              >
                 رقم {{ ProductDetailsViewModel.data[0].product.number }}
              </h3>
              <h3 style="align-self: center; margin: 0px; padding-right: 13px">
                {{ ProductDetailsViewModel.data[0].product.title }}
              </h3>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="container"> -->
      <div class="card">
        <div class="card-body">
          <div *ngIf="issuccess == true" class="alert alert-success" role="alert">
            لقد تم اخذ مزايدتكم بعين الاعتبار
          </div>
          <div *ngIf="issuccess == false" class="alert alert-danger" role="alert">
            المرجو التحقق من مزايدتكم يجب ان يكون ثمن مزايدتك اكبر من الثمن الحالي للمزايدة
          </div>

          <div class="row">
            <div class="col-lg-4 col-sm-4 col-sm-12">
              <div
                id="carouselExampleControls"
                class="carousel slide"
                data-ride="carousel"
              >
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img
                      class="d-block"
                      style="object-fit: fill; width: 100%; height: 260px"
                      [src]="currenuImageDisplayed"
                      alt=""
                      #src
                      (click)="popupImage(imgDisplay, src, myModal)"
                    />
                  </div>
                </div>
              </div>
              <div class="row mr-3 mb-3 mt-2">
                <div
                  class="wrapper d-flex mr-2 card-body"
                  style="width: 80%; margin: 0 auto"
                >
                  <ng-template  [ngIf]="attachements && attachements.length > 0">
                    <div

                      id="carouselExampleControls"
                      class="carousel slide"
                      data-ride="carousel"
                      *ngFor="
                        let att of attachements
                      "
                    >
                      <div class="carousel-inner">
                        <ng-template [ngIf]="attachements.length != 0">
                          <div class="carousel-item active">
                            <img
                              style="
                                object-fit: fill;
                                margin: 3px;
                                width: 50px;
                                height: 50px;
                              "
                              class="d-block"
                              [src]="getAttachement(att.contentType, att.file)"
                              alt=""
                              (click)="
                                displayCurrentImage(
                                  getAttachement(att.contentType, att.file)
                                )
                              "
                            />
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>

            <div class="col">

              <label for="">
                <span class="grey--color font--size">تاريخ الاعلان عن المزايدة:</span>
                <span dir="ltr" class="font--size">{{
                  formatDate(ProductDetailsViewModel.data[0].startDate)
                }}</span>
              </label>
              <br />
              <label for="">
                <span class="grey--color font--size">المزايدة الحالية:</span>
                <span class="font--size"
                  >

                  {{
                    ProductDetailsViewModel.data[0].currentBid | number: "4.0"
                  }}
                  (د.م)</span
                >
              </label>
              <br />
              <!-- <label for="">
                <span class="grey--color font--size">عنوان:</span>
                <span class="font--size">{{
                  ProductDetailsViewModel.data[0].product.address
                }}</span>
              </label>
              <br /> -->
              <label for="" [ngIf]="isUserAdmin() === false">
                <span class="grey--color font--size">شروط المزايدة:</span>
                <span class="font--size">
                  <!-- <pre> -->
                    احترام المبالغ المحددة للمزايدة في أثمنة المساهمة و واجبات الكراء الشهرية
                    لا يمكن للحد الادنى لكل متزايد في المنافسة أن يقل عن مبلغ :<br>
                        . 2000 درهم بالنسبة لواجب المساهمة.<br>
                        . 100 درهم بالنسبة لواجب الكراء الشهري.<br>
                    لا يمكن للمنافسة ان تقتصر على واجب الكراء الشهري دون المزايدة في المساهمة و عكس ذلك صحيح
                    ضرورة دفع الضمانة المحددة في الاعلان عن إبداء الاهتمام في الحساب البنكي المفتوح لهذه الغاية تحت رقم 007575000803500000055442
                   <br>ترسل تواصيل إيداع الضمانات بواسطة الانترنت إلى العنوان  a.beyyoudh@sdmb.ma ، ويمكن ايداعها  مباشرة إلى إدارة القدس بنفس المنصة  .    <!-- </pre> -->
                </span>
              </label>
              <br />
              <label for="">
                <span class="grey--color font--size">تاريخ انتهاء المزاد:</span>
                <span class="font--size">{{
                  ProductDetailsViewModel.data[0].endDate == null
                    ? "غير محدد"
                    : (ProductDetailsViewModel.data[0].endDate
                      | date: "short":"fr")
                }}</span>
              </label>

              <br />
              <label for="">
                <span class="grey--color font--size">النشاط التجاري المزاول في المحل:</span>
                <span class="font--size"
                  >{{
                    ProductDetailsViewModel.data[0].product.activity.name
                  }}</span>
              </label>
              <br />
              <label for="">
                <span class="grey--color font--size">الواجب الشهري:</span>
                <span class="font--size"> {{
                  ProductDetailsViewModel.data[0].currentRentBid | number: "4.0"
                }} (د.م)</span>
              </label>

              <br />
              <label for="">
                <span class="grey--color font--size">الضمانة:</span>
                <span class="font--size"> {{
                  (ProductDetailsViewModel.data[0].product.rentPrice + ProductDetailsViewModel.data[0].product.price ) | number: "4.0"
                }} (د.م)</span>
              </label>

              <br />
              <label for="">
                <span class="grey--color font--size">مساحة المحل:</span>
                <span class="font--size"
                  >
                  {{ ProductDetailsViewModel.data[0].product.surface }} متر مربع
                  </span>
              </label>
              <br />
              <div class="mt-4">
                <!-- <label for="">مزايدتك</label> -->
                <div class="row">
                  <form
                    class="row"
                    #form
                    [formGroup]="dataRegistred"
                    (ngSubmit)="onSubmit()"
                  >
                  <!-- <section class="ftco-section"> -->
                    <!-- <div class="container"> -->
                      <!-- <div class="row"> -->
                        <!-- <div class="col-md-12"> -->
                          <!-- <div class="d-flex text-center"> -->
                          <!-- </div> -->
                          <div class="table-wrap table-responsive-sm">
                            <table class="table">
                              <thead class="thead-primary">
                                <tr>
                                  <!-- <th>&nbsp;</th> -->
                                  <!-- <th>&nbsp;</th> -->
                                  <th style="width:6.6%">رقم المحل</th>
                                  <th style="width:16.6%">النشاط التجاري</th>
                                  <th style="width:16.6%">المساحة</th>
                                  <th [colSpan]="2" style="width:18.6%">اخر مزايدة</th>
                                  <!-- <th></th> -->
                                  <th [ngIf]="isUserAdmin() === false" [colSpan]="2" style="width:24.6%">مزايدتي</th>
                                  <!-- <th>Quantity</th> -->
                                  <!-- <th>total</th> -->
                                  <!-- <th>Details</th> -->
                                </tr>
                              </thead>
                              <thead class="">
                                <tr>
                                  <!-- <th>&nbsp;</th> -->
                                  <!-- <th>&nbsp;</th> -->
                                  <th style="width:6.6%"></th>
                                  <th style="width:16.6%"></th>
                                  <th style="width:16.6%"></th>
                                  <th style="width:10.6%">المساهمة</th>
                                  <th style="width:16.6%">واجب الكراء</th>
                                  <th [ngIf]="isUserAdmin() === false" style="width:16.6%">المساهمة</th>
                                  <th [ngIf]="isUserAdmin() === false" style="width:29.6%">واجب الكراء</th>
                                  <!-- <th>Quantity</th> -->
                                  <!-- <th>total</th> -->
                                  <!-- <th>Details</th> -->
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <!-- <td></td> -->
                                  <td><label style="height: 100%;padding: 9px;">{{ ProductDetailsViewModel.data[0].product.number}}</label></td>
                                  <td><label style="height: 100%;padding: 9px;">{{
                                    ProductDetailsViewModel.data[0].product.activity.name
                                  }}</label></td>
                                  <td><label style="height: 100%;padding: 9px;"> {{ ProductDetailsViewModel.data[0].product.surface }} متر مربع</label></td>
                                  <td class="">
                                    <label for="" style="height: 100%;padding: 9px;">{{  ProductDetailsViewModel.data[0].currentBid | number: "4.0" }}</label>
                                  </td>
                                  <td>
                                    <label for="" style="height: 100%;padding: 9px;">{{  ProductDetailsViewModel.data[0].currentRentBid | number: "4.0" }}</label>
                                  </td>

                                  <td [ngIf]="isUserAdmin() === false">
                                    <select name="" id="" class="form-control" (change)="GetSelectedTextValue($event)">
                                      <option selected value="-1">اختر ثمن مزايدتك</option>
                                      <!-- <option value="{{ProductDetailsViewModel.data[0].bidsNumber}}">{{ProductDetailsViewModel.data[0].bidsNumber}}</option> -->
                                      <option *ngIf="ProductDetailsViewModel.data[0].bidsNumber === 0" value="0"> 0 </option>
                                      <!-- <option [value]="ProductDetailsViewModel.data[0].currentBid" *ngIf="" > {{ProductDetailsViewModel.data[0].currentBid}} </option> -->
                                      <option [value]="price" *ngFor="let price of priceList">{{price}}</option>
                                    </select>
                                  </td>
                                  <td>
                                    <!-- <ng-template [ngIf]="ProductDetailsViewModel.data[0].product.price === ProductDetailsViewModel.data[0].currentBid">
                                      <input type="number" class="form-control" disabled value="0" id="">
                                    </ng-template> -->
                                    <!-- <ng-template [ngIf]="ProductDetailsViewModel.data[0].product.price !== ProductDetailsViewModel.data[0].currentBid"> -->
                                      <input type="number" class="form-control" disabled value="{{rentValue}}" id="">
                                    <!-- </ng-template> -->
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        <!-- </div> -->
                      <!-- </div> -->
                    <!-- </div> -->
                  <!-- </section> -->
                    <ng-template [ngIf]="isUserAccountActivated() == true">
                      <div class="col-lg-4 col-md-8 col-sm-12">
                        <input type="button" style="width: 100%;" (click)="onSubmit()"  class="btn btn-primary" value="تسجيل مزايدة" />
                      </div>
                    </ng-template>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button class="btn btn-success mt-2 mb-2" routerLink="/">
      قائمة المزادات
    </button>
  </div>
  <!-- </div> -->
</ng-template>


<div #myModal class="modal-1">
  <label class="close-1" (click)="closeImage(myModal)">&times;</label>
  <img class="modal-content-1" #imgDisplay id="img01" />
</div>





